<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resource Usage Line Chart (CPU / RAM / Disk)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#f7f8fb; color:#222; }
    .card { background:white; padding:16px; border-radius:8px; box-shadow: 0 6px 18px rgba(20,20,40,0.06); max-width:900px; margin:0 auto;}
    h1 { font-size:18px; margin:0 0 12px; }
    p { margin:0 0 12px; color:#555; }
    canvas { width:100% !important; height:420px !important; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Resource Usage Over 52 Data Points — Line Chart</h1>
    <p>เส้นสีแดง = CPU, สีฟ้า = RAM, สีเหลือง = Disk — มีเส้นค่าเฉลี่ย (dashed) เพื่อช่วยดูความสมดุล</p>
    <canvas id="resourceChart"></canvas>
  </div>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Labels 1..52
    const labels = Array.from({length:52}, (_,i) => i+1);

    // ตัวอย่างข้อมูล 52 ค่า (เปลี่ยนเป็นข้อมูลจริงของคุณได้เลย)
    const cpu = [
      45,48,50,52,55,58,60,63,65,68,70,72,75,78,80,77,74,72,70,68,66,64,62,60,58,56,
      55,54,53,52,50,49,48,47,46,45,46,48,50,52,55,57,59,61,63,65,67,69,70,72,73,74
    ];

    const ram = [
      40,42,43,45,47,49,50,52,54,55,57,58,59,60,62,61,60,59,58,57,56,55,54,53,52,51,
      50,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,66,65,64,63,62,61,60,59
    ];

    const disk = [
      30,31,33,34,36,38,40,41,42,44,45,46,47,48,49,50,50,51,52,53,54,55,55,54,53,52,
      51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,34,35,36,37,38,39,40
    ];

    // helper: compute average
    function avg(arr){ return arr.reduce((s,v)=>s+v,0)/arr.length; }

    const avgCpu = avg(cpu);
    const avgRam = avg(ram);
    const avgDisk = avg(disk);

    // datasets for Chart.js
    const datasets = [
      {
        label: 'CPU',
        data: cpu,
        borderColor: 'rgba(255, 99, 132, 1)',
        backgroundColor: 'rgba(255, 99, 132, 0.08)',
        tension: 0.25,
        pointRadius: 2,
        fill: false,
        borderWidth: 2
      },
      {
        label: 'RAM',
        data: ram,
        borderColor: 'rgba(54, 162, 235, 1)',
        backgroundColor: 'rgba(54, 162, 235, 0.06)',
        tension: 0.25,
        pointRadius: 2,
        fill: false,
        borderWidth: 2
      },
      {
        label: 'Disk',
        data: disk,
        borderColor: 'rgba(255, 206, 86, 1)',
        backgroundColor: 'rgba(255, 206, 86, 0.06)',
        tension: 0.25,
        pointRadius: 2,
        fill: false,
        borderWidth: 2
      },

    //   // average lines (flat datasets)
    //   {
    //     label: `CPU Avg (${avgCpu.toFixed(1)}%)`,
    //     data: Array(labels.length).fill(avgCpu),
    //     borderColor: 'rgba(255, 99, 132, 0.6)',
    //     borderDash: [6,4],
    //     pointRadius: 0,
    //     fill: false,
    //     tension: 0
    //   },
    //   {
    //     label: `RAM Avg (${avgRam.toFixed(1)}%)`,
    //     data: Array(labels.length).fill(avgRam),
    //     borderColor: 'rgba(54, 162, 235, 0.6)',
    //     borderDash: [6,4],
    //     pointRadius: 0,
    //     fill: false,
    //     tension: 0
    //   },
    //   {
    //     label: `Disk Avg (${avgDisk.toFixed(1)}%)`,
    //     data: Array(labels.length).fill(avgDisk),
    //     borderColor: 'rgba(255, 206, 86, 0.6)',
    //     borderDash: [6,4],
    //     pointRadius: 0,
    //     fill: false,
    //     tension: 0
    //   }
    ];

    const ctx = document.getElementById('resourceChart').getContext('2d');

    new Chart(ctx, {
      type: 'line',
      data: { labels, datasets },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: { mode: 'index', intersect: false },
        stacked: false,
        plugins: {
          title: {
            display: true,
            text: 'Resource Usage Over Time (1–52)'
          },
          legend: {
            position: 'bottom',
            labels: { usePointStyle: true, boxWidth:10 }
          },
          tooltip: {
            enabled: true,
            mode: 'index',
            intersect: false,
            callbacks: {
              label: function(ctx){
                return ctx.dataset.label + ': ' + ctx.parsed.y + '%';
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            title: { display:true, text: 'Usage (%)' }
          },
          x: {
            title: { display:true, text: 'Data Point (1–52)' }
          }
        }
      }
    });
  </script>
</body>
</html>
